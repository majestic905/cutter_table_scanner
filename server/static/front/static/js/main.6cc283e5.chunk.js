(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{22:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),r=a(12),i=a.n(r),l=(a(19),a(20),a(2)),o=a(3),j=a.n(o),u=a(5),b=a(13),d=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],s=a[1],r=Object(n.useState)(void 0),i=Object(l.a)(r,2),o=i[0],d=i[1],O=Object(n.useState)(void 0),m=Object(l.a)(O,2),g=m[0],x=m[1],v=Object(n.useState)({}),f=Object(l.a)(v,2),p=f[0],h=f[1],k=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(e),s(!0),x(void 0)}),[]);return Object(n.useEffect)((function(){if(c){var t=!1;return function(){a.apply(this,arguments)}(),function(){t=!0}}function a(){return(a=Object(u.a)(j.a.mark((function a(){var c;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(b.a)(e,p).json();case 3:if(c=a.sent,!t){a.next=6;break}return a.abrupt("return");case 6:d(c),s(!1),a.next=24;break;case 10:if(a.prev=10,a.t0=a.catch(0),!t){a.next=14;break}return a.abrupt("return");case 14:if("HTTPError"!==a.t0.name){a.next=22;break}return a.t1=x,a.next=18,a.t0.response.json();case 18:a.t2=a.sent.message,(0,a.t1)(a.t2),a.next=23;break;case 22:x(a.t0.message);case 23:s(!1);case 24:case"end":return a.stop()}}),a,null,[[0,10]])})))).apply(this,arguments)}}),[c,e,p]),[{isLoading:c,response:o,error:g},k]},O=a(6),m=a.n(O),g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(n.useState)(e),a=Object(l.a)(t,2),c=a[0],s=a[1],r=Object(n.useCallback)((function(){return s(!0)}),[s]),i=Object(n.useCallback)((function(){return s(!1)}),[s]),o=Object(n.useCallback)((function(){return s((function(e){return!e}))}),[s]);return{openModal:r,closeModal:i,toggleModal:o,isOpened:c}},x=function(e){var t=e.closeModal,a=Object(n.useState)(),s=Object(l.a)(a,2),r=s[0],i=s[1],o=d("/api/cameras"),j=Object(l.a)(o,2),u=j[0],b=u.isLoading,O=u.response,g=u.error,x=j[1];Object(n.useEffect)(x,[x]),Object(n.useEffect)((function(){void 0===O||r?void 0!==O&&r&&t():i(JSON.stringify(O,null,2))}),[O,i,t]);var v=Object(n.useCallback)((function(e){e.preventDefault(),x({method:"POST",headers:{"Content-Type":"application/json"},body:e.target.elements.settings.value})}),[x]),f=m()("btn btn-primary float-right mr-2",{loading:b});return Object(c.jsxs)("form",{className:"modal active",onSubmit:v,children:[Object(c.jsx)("span",{className:"modal-overlay",onClick:t}),Object(c.jsxs)("div",{className:"modal-container modal-fullheight",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("button",{type:"button",className:"btn btn-link float-right",onClick:t,children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),Object(c.jsx)("input",{type:"submit",className:f,value:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"}),Object(c.jsx)("div",{className:"modal-title h5",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]}),Object(c.jsxs)("ul",{className:"mt-0",children:[Object(c.jsx)("li",{className:"mt-0",children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f table_section_size (\u043c\u0438\u043b\u043b\u0438\u043c\u0435\u0442\u0440\u044b) \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f, \u043e\u043d\u0438 \u0437\u0434\u0435\u0441\u044c \u0434\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u0438."}),Object(c.jsx)("li",{className:"mt-0",children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u044f projected_image_size (\u043f\u0438\u043a\u0441\u0435\u043b\u0438) \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f; \u0437\u0430\u0434\u0430\u044e\u0442\u0441\u044f \u0432\u0440\u0443\u0447\u043d\u0443\u044e; \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u0433\u043e \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f\u043c table_section_size!"})]}),g&&Object(c.jsx)("div",{className:"modal-header pt-0",children:Object(c.jsx)("div",{className:"toast toast-error",children:g})}),Object(c.jsxs)("div",{className:"modal-body pt-0",children:[r&&Object(c.jsx)("textarea",{id:"settings",name:"settings",className:"form-input",defaultValue:r}),b&&Object(c.jsx)("div",{className:"loading loading-lg"})]})]})]})},v=function(e){var t=e.getScan,a=g(),s=a.isOpened,r=a.closeModal,i=a.openModal,o=d("/api/scan"),j=Object(l.a)(o,2),u=j[0],b=u.isLoading,O=u.response,v=u.error,f=j[1],p=Object(n.useCallback)((function(e){f({method:"POST",searchParams:{scan_type:e},timeout:5e4})}),[f]);return Object(n.useEffect)((function(){O?alert("\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e"):v&&alert("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e: ".concat(v)),(O||v)&&t()}),[O,v,t]),Object(c.jsxs)("header",{className:"navbar",children:[Object(c.jsxs)("section",{className:"navbar-section",children:[Object(c.jsx)("button",{className:m()("btn btn-primary mr-2",{loading:b}),onClick:function(){return p("snapshot")},children:"\u0421\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(c.jsx)("button",{className:m()("btn btn-primary mr-2",{loading:b}),onClick:function(){return p("capture")},children:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0444\u043e\u0442\u043e"}),Object(c.jsx)("button",{type:"button",className:m()("btn mr-2",{loading:b}),onClick:i,children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]}),s&&Object(c.jsx)(x,{closeModal:r})]})},f=function(e){var t=e.text;return Object(c.jsx)("textarea",{id:"log",className:"form-input",value:t,readOnly:!0})},p=function(e){var t=e.text,a=e.isActive,n=e.name,s=e.onClick,r=m()("tab-item text-bold text-uppercase",{active:a});return Object(c.jsx)("li",{className:r,"data-tab-name":n,onClick:s,children:Object(c.jsx)("a",{href:"#",children:t})})},h=function(e){var t=e.children;return Object(c.jsx)("ul",{className:"tab",children:t})},k=a(4),N=a(11),C=function(e){var t=e.url,a=e.src,n=e.alt,s=e.download,r=Object(N.a)(e,["url","src","alt","download"]);n=n||a,t=t||a;return Object(c.jsx)("img",Object(k.a)({className:"img-responsive clickable c-hand",src:a,alt:n,onClick:function(){var e=document.createElement("a");e.href=t,e.download=s||t.split("/").pop(),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},r))},y=function(e){var t=e.src,a=e.alt,n=Object(N.a)(e,["src","alt"]);return a=a||t,Object(c.jsx)("img",Object(k.a)({className:"img-responsive",src:t,alt:a},n))},L=function(e){var t=e.images,a=e.isClickable?C:y,n=["LU","RU","LL","RL"].map((function(e){return Object(c.jsx)("div",{className:"column col-6",children:Object(c.jsx)(a,Object(k.a)({},t[e]))},e)}));return Object(c.jsx)("div",{className:"container grid-lg images-grid",children:Object(c.jsx)("div",{className:"columns",children:n})})};function S(e,t){var a=e.thumb,c=e.image;return{src:"".concat(a,"?").concat(t),alt:c,url:c}}var A=function(e){var t=e.url,a=e.createdAt,n="".concat(t,"?").concat(a);a=new Date(a).toISOString().slice(0,19).replace(/[-:T]/g,"_");var s="result_".concat(a,".jpg");return Object(c.jsx)("div",{className:"container grid-lg",children:Object(c.jsx)(C,{src:n,alt:t,url:t,download:s,id:"result"})})},T=function(e){for(var t=e.scan,a=Object(n.useState)("result"),s=Object(l.a)(a,2),r=s[0],i=s[1],o=Object(n.useCallback)((function(e){return i(e.currentTarget.dataset.tabName)}),[i]),j={original:{},projected:{},result:t.images.result},u=0,b=["original","projected"];u<b.length;u++)for(var d=b[u],O=0,m=["LU","LL","RU","RL"];O<m.length;O++){var g=m[O];j[d][g]=S(t.images[d][g],t.createdAt)}return Object(c.jsxs)("div",{children:[Object(c.jsxs)(h,{children:[Object(c.jsx)(p,{onClick:o,name:"original",text:"Original",isActive:"original"===r}),Object(c.jsx)(p,{onClick:o,name:"projected",text:"Projected",isActive:"projected"===r}),Object(c.jsx)(p,{onClick:o,name:"result",text:"Result",isActive:"result"===r}),Object(c.jsx)(p,{onClick:o,name:"log",text:"Log",isActive:"log"===r})]}),"original"===r&&Object(c.jsx)(L,{images:j.original,isClickable:!0}),"projected"===r&&Object(c.jsx)(L,{images:j.projected,isClickable:!0}),"result"===r&&Object(c.jsx)(A,{url:j.result.image,createdAt:t.createdAt}),"log"===r&&Object(c.jsx)(f,{text:t.log})]})},w=function(e){var t=e.scan,a=Object(n.useState)("original"),s=Object(l.a)(a,2),r=s[0],i=s[1],o=Object(n.useCallback)((function(e){return i(e.currentTarget.dataset.tabName)}),[i]),j={original:{}};for(var u in j)for(var b=0,d=["LU","LL","RU","RL"];b<d.length;b++){var O=d[b],m=t.images[u][O],g=m.image,x=m.thumb;j[u][O]={src:"".concat(x,"?").concat(t.createdAt),alt:g,url:g}}return Object(c.jsxs)("div",{children:[Object(c.jsxs)(h,{children:[Object(c.jsx)(p,{onClick:o,name:"original",text:"Original",isActive:"original"===r}),Object(c.jsx)(p,{onClick:o,name:"log",text:"Log",isActive:"log"===r})]}),"original"===r&&Object(c.jsx)(L,{images:j.original,isClickable:!0}),"log"===r&&Object(c.jsx)(f,{text:t.log})]})};a(22);var E=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],s=t[1],r=d("/api/scan"),i=Object(l.a)(r,2),o=i[0],j=o.isLoading,u=o.response,b=o.error,O=i[1];return Object(n.useEffect)(O,[O]),Object(n.useEffect)((function(){u?s(u):b&&alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0441\u043a\u0430\u043d\u0430: ".concat(b))}),[u,b]),Object(c.jsxs)("main",{children:[Object(c.jsx)(v,{getScan:O}),j&&Object(c.jsx)("div",{className:"loading mt-2"}),"snapshot"===(null===a||void 0===a?void 0:a.scanType)&&Object(c.jsx)(T,{scan:a}),"capture"===(null===a||void 0===a?void 0:a.scanType)&&Object(c.jsx)(w,{scan:a})]})};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.6cc283e5.chunk.js.map